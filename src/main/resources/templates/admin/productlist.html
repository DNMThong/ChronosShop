<!DOCTYPE html>
<html lang="vi" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <meta name="description" content="POS - Bootstrap Admin Template" />
    <meta
            name="keywords"
            content="admin, estimates, bootstrap, business, corporate, creative, invoice, html5, responsive, Projects"
    />
    <meta name="author" content="Dreamguys - Bootstrap Admin Template" />
    <meta name="robots" content="noindex, nofollow" />
    <title>Jassa admin template</title>
    <div th:replace="~{component/link/linkAndscript :: head}"></div>
</head>
<body>
<div id="global-loader">
    <div class="whirly-loader"></div>
</div>

<div class="main-wrapper">
    <div class="header">
        <div class="header-left active">
            <a th:href="@{/admin/index}" class="logo">
                <img th:src="@{/assets/admin/img/logo.png}" alt="" />
            </a>
            <a th:href="@{/admin/index}" class="logo-small">
                <img th:src="@{/assets/admin/img/logo-small.png}" alt="" />
            </a>
            <a id="toggle_btn" href="javascript:void(0);"> </a>
        </div>

        <a id="mobile_btn" class="mobile_btn" href="#sidebar">
          <span class="bar-icon">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </a>

        <ul class="nav user-menu">
            <li class="nav-item">
                <div class="top-nav-search">
                    <a href="javascript:void(0);" class="responsive-search">
                        <i class="fa fa-search"></i>
                    </a>
                    <form action="#">
                        <div class="searchinputs">
                            <input type="text" placeholder="Search Here ..." />
                            <div class="search-addon">
                    <span
                    ><img th:src="@{/assets/admin/img/icons/closes.svg}" alt="img"
                    /></span>
                            </div>
                        </div>
                        <a class="btn" id="searchdiv"
                        ><img th:src="@{/assets/admin/img/icons/search.svg}" alt="img"
                        /></a>
                    </form>
                </div>
            </li>

            <li class="nav-item dropdown has-arrow flag-nav">
                <a
                        class="nav-link dropdown-toggle"
                        data-bs-toggle="dropdown"
                        href="javascript:void(0);"
                        role="button"
                >
                    <img th:src="@{/assets/admin/img/flags/us1.png}" alt="" height="20" />
                </a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a href="javascript:void(0);" class="dropdown-item">
                        <img th:src="@{/assets/admin/img/flags/us.png}" alt="" height="16" /> English
                    </a>
                    <a href="javascript:void(0);" class="dropdown-item">
                        <img th:src="@{/assets/admin/img/flags/fr.png}" alt="" height="16" /> French
                    </a>
                    <a href="javascript:void(0);" class="dropdown-item">
                        <img th:src="@{/assets/admin/img/flags/es.png}" alt="" height="16" /> Spanish
                    </a>
                    <a href="javascript:void(0);" class="dropdown-item">
                        <img th:src="@{/assets/admin/img/flags/de.png}" alt="" height="16" /> German
                    </a>
                </div>
            </li>

            <li class="nav-item dropdown">
                <a
                        href="javascript:void(0);"
                        class="dropdown-toggle nav-link"
                        data-bs-toggle="dropdown"
                >
                    <img th:src="@{/assets/admin/img/icons/notification-bing.svg}" alt="img" />
                    <span class="badge rounded-pill">4</span>
                </a>
                <div class="dropdown-menu notifications">
                    <div class="topnav-dropdown-header">
                        <span class="notification-title">Notifications</span>
                        <a href="javascript:void(0)" class="clear-noti"> Clear All </a>
                    </div>
                    <div class="noti-content">
                        <ul class="notification-list">
                            <li class="notification-message">
                                <a th:href="@{/admin/activities}">
                                    <div class="media d-flex">
                        <span class="avatar flex-shrink-0">
                          <img alt="" th:src="@{/assets/admin/img/profiles/avatar-02.jpg}" />
                        </span>
                                        <div class="media-body flex-grow-1">
                                            <p class="noti-details">
                                                <span class="noti-title">John Doe</span> added new
                                                task
                                                <span class="noti-title"
                                                >Patient appointment booking</span
                                                >
                                            </p>
                                            <p class="noti-time">
                                                <span class="notification-time">4 mins ago</span>
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="notification-message">
                                <a th:href="@{/admin/activities}">
                                    <div class="media d-flex">
                        <span class="avatar flex-shrink-0">
                          <img alt="" th:src="@{/assets/admin/img/profiles/avatar-03.jpg}" />
                        </span>
                                        <div class="media-body flex-grow-1">
                                            <p class="noti-details">
                                                <span class="noti-title">Tarah Shropshire</span>
                                                changed the task name
                                                <span class="noti-title"
                                                >Appointment booking with payment gateway</span
                                                >
                                            </p>
                                            <p class="noti-time">
                                                <span class="notification-time">6 mins ago</span>
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="notification-message">
                                <a th:href="@{/admin/activities}">
                                    <div class="media d-flex">
                        <span class="avatar flex-shrink-0">
                          <img alt="" th:src="@{/assets/admin/img/profiles/avatar-06.jpg}" />
                        </span>
                                        <div class="media-body flex-grow-1">
                                            <p class="noti-details">
                                                <span class="noti-title">Misty Tison</span> added
                                                <span class="noti-title">Domenic Houston</span> and
                                                <span class="noti-title">Claire Mapes</span> to
                                                project
                                                <span class="noti-title"
                                                >Doctor available module</span
                                                >
                                            </p>
                                            <p class="noti-time">
                                                <span class="notification-time">8 mins ago</span>
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="notification-message">
                                <a th:href="@{/admin/activities}">
                                    <div class="media d-flex">
                        <span class="avatar flex-shrink-0">
                          <img alt="" th:src="@{/assets/admin/img/profiles/avatar-17.jpg}" />
                        </span>
                                        <div class="media-body flex-grow-1">
                                            <p class="noti-details">
                                                <span class="noti-title">Rolland Webber</span>
                                                completed task
                                                <span class="noti-title"
                                                >Patient and Doctor video conferencing</span
                                                >
                                            </p>
                                            <p class="noti-time">
                                                <span class="notification-time">12 mins ago</span>
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="notification-message">
                                <a th:href="@{/admin/activities}">
                                    <div class="media d-flex">
                        <span class="avatar flex-shrink-0">
                          <img alt="" th:src="@{/assets/admin/img/profiles/avatar-13.jpg}" />
                        </span>
                                        <div class="media-body flex-grow-1">
                                            <p class="noti-details">
                                                <span class="noti-title">Bernardo Galaviz</span>
                                                added new task
                                                <span class="noti-title">Private chat module</span>
                                            </p>
                                            <p class="noti-time">
                                                <span class="notification-time">2 days ago</span>
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="topnav-dropdown-footer">
                        <a th:href="@{/admin/activities}">View all Notifications</a>
                    </div>
                </div>
            </li>

            <li class="nav-item dropdown has-arrow main-drop">
                <a
                        href="javascript:void(0);"
                        class="dropdown-toggle nav-link userset"
                        data-bs-toggle="dropdown"
                >
              <span class="user-img"
              ><img th:src="@{/assets/admin/img/profiles/avator1.jpg}" alt="" />
                <span class="status online"></span
                ></span>
                </a>
                <div class="dropdown-menu menu-drop-user">
                    <div class="profilename">
                        <div class="profileset">
                  <span class="user-img"
                  ><img th:src="@{/assets/admin/img/profiles/avator1.jpg}" alt="" />
                    <span class="status online"></span
                    ></span>
                            <div class="profilesets">
                                <h6>John Doe</h6>
                                <h5>Admin</h5>
                            </div>
                        </div>
                        <hr class="m-0" />
                        <a class="dropdown-item" th:href="@{/admin/profile}">
                            <i class="me-2" data-feather="user"></i> My Profile</a
                        >
                        <a class="dropdown-item" th:href="@{/admin/generalsettings}"
                        ><i class="me-2" data-feather="settings"></i>Settings</a
                        >
                        <hr class="m-0" />
                        <a class="dropdown-item logout pb-0" th:href="@{/admin/signin}"
                        ><img
                                th:src="@{/assets/admin/img/icons/log-out.svg}"
                                class="me-2"
                                alt="img"
                        />Logout</a
                        >
                    </div>
                </div>
            </li>
        </ul>

        <div class="dropdown mobile-user-menu">
            <a
                    href="javascript:void(0);"
                    class="nav-link dropdown-toggle"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
            ><i class="fa fa-ellipsis-v"></i
            ></a>
            <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item" th:href="@{/admin/profile}">My Profile</a>
                <a class="dropdown-item" th:href="@{/admin/generalsettings}">Settings</a>
                <a class="dropdown-item" th:href="@{/admin/signin}">Logout</a>
            </div>
        </div>
    </div>

    <th:block th:replace="~{component/sidebar/SideBarAdmin :: sliderbarAdmin}"></th:block>

    <div class="page-wrapper">
        <div class="content">
            <div class="page-header">
                <div class="page-title">
                    <h4>Danh sách sản phẩm</h4>
                    <h6>Quản lí sản phẩm của bạn</h6>
                </div>
                <div class="page-btn">
                    <a th:href="@{/admin/addproduct}" class="btn btn-added"
                    ><img
                            th:src="@{/assets/admin/img/icons/plus.svg}"
                            alt="img"
                            class="me-1"
                    />Thêm sản phẩm mới</a
                    >
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="table-top">
                        <div class="search-set">
                            <div class="search-path">
                                <a class="btn btn-filter" id="filter_search">
                                    <img th:src="@{/assets/admin/img/icons/filter.svg}" alt="img" />
                                    <span
                                    ><img th:src="@{/assets/admin/img/icons/closes.svg}" alt="img"
                                    /></span>
                                </a>
                            </div>
                            <div class="search-input">
                                <a class="btn btn-searchset"
                                ><img th:src="@{/assets/admin/img/icons/search-white.svg}" alt="img"
                                /></a>
                            </div>
                        </div>
                        <div class="wordset">
                            <ul>
                                <li>
                                    <a
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            title="pdf"
                                    ><img th:src="@{/assets/admin/img/icons/pdf.svg}" alt="img"
                                    /></a>
                                </li>
                                <li>
                                    <a
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            title="excel"
                                    ><img th:src="@{/assets/admin/img/icons/excel.svg}" alt="img"
                                    /></a>
                                </li>
                                <li>
                                    <a
                                            data-bs-toggle="tooltip"
                                            data-bs-placement="top"
                                            title="print"
                                    ><img th:src="@{/assets/admin/img/icons/printer.svg}" alt="img"
                                    /></a>
                                </li>
                            </ul>
                        </div>
                    </div>



                    <div class="table-responsive">
                        <table class="table datanew">
                            <thead>
                            <tr>
                                <th>
                                    <label class="checkboxs">
                                        <input type="checkbox" id="select-all" />
                                        <span class="checkmarks"></span>
                                    </label>
                                </th>

                                <th>Tên sản phẩm</th>
                                <th>Danh mục</th>
                                <th>Giá mới</th>
                                <th>Giá cũ</th>
                                <th>Chất liệu</th>
                                <th>Trạng thái</th>
                                <th>Lựa chọn</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="item:${products}">
                                <td>
                                    <label class="checkboxs">
                                        <input type="checkbox" />
                                        <span class="checkmarks"></span>
                                    </label>
                                </td>
                                <td th:text="${item.getProductName()}" >

                                </td>

                                <td th:text="${item.getCategory().getCategoryName()}"></td>
                                <td th:text="${item.getPriceOld()}"></td>
                                <td th:text="${#numbers.formatDecimal(item.getPriceNew(),0, 'COMMA', 0, 'POINT')}"></td>
                                <td th:text="${item.getMaterial()}"></td>
                                <td th:switch="${item.getStatus()}" >
                                    <span th:case="'Còn hàng'" th:text="${item.getStatus()}" class="badges bg-lightgreen"
                                    >
                                    </span>
                                    <span th:case="'Đã xóa'" th:text="${item.getStatus()}" class="badges bg-danger"
                                    >
                                    </span>
                                    <span th:case="'Hết hàng'" th:text="${item.getStatus()}" class="badges bg-warning"
                                    >
                                    </span>
                                </td>
                                <td>
                                    <a class="me-3" th:href="@{/admin/addproduct-variant}">
                                        <img th:src="@{/assets/admin/img/icons/color.svg}" alt="img" />
                                    </a>
                                    <a class="me-3" th:href="@{'/admin/editproduct/'+${item.getProductId()}}">
                                        <img th:src="@{/assets/admin/img/icons/edit.svg}" alt="img" />
                                    </a>
                                    <a class="btn-delete-product" th:href="@{'/admin/product/delete/'+${item.getProductId()}}">
                                        <img th:src="@{/assets/admin/img/icons/delete.svg}" alt="img" />
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="~{component/link/linkAndscript :: script}"></div>
<script>
    document.querySelectorAll('.btn-delete-product').forEach(item => {
        item.onclick = (e) => {
            e.preventDefault();
            Swal.fire({
                title: 'Bạn có chắc muốn xóa sản phẩm này?',
                text: "",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Xóa sản phẩm',
                cancelButtonText: 'Hủy'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = item.href;
                }
            })
        }
    })
</script>
</body>
</html>
