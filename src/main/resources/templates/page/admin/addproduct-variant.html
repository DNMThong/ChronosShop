<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head>
  <title>Chronos admin</title>
  <div th:replace="~{component/admin/link/linkAndscript :: head}"></div>
</head>

<body>
<div id="global-loader">
  <div class="whirly-loader"> </div>
</div>

<div class="main-wrapper">

  <th:block th:replace="~{component/admin/header/headerAdmin :: header}"></th:block>

  <th:block th:replace="~{component/admin/sidebar/SideBarAdmin :: sliderbarAdmin}"></th:block>

  <div class="page-wrapper">
    <div class="content">
      <div class="page-header">
        <div class="page-title">
          <h4>[[${title}]] sản phẩm biến thể</h4>
        </div>
      </div>

      <div class="card">
        <form class="card-body" th:action="@{/admin/product-variant/add}" th:object="${productVariants}" method="post" id="formProduct" enctype="multipart/form-data">
          <div class="row">
            <input type="hidden" th:field="*{productColorId}">
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <label>SKU</label>
                <input id="validationDefault02" type="text" name="sku" th:value="${sku}" required  min="4" max="10">
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <label>Id Sản phẩm</label>
                <input  disabled class="form-control" name="productIdHidden" th:value="${productId}" >
                <input  type="hidden" class="form-control" name="productId" th:value="${productId}" required  min="1" max="999999999">
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <label>Màu sắc</label>
                <input type="text" th:field="*{productColorName}" required  min="1" max="20" >
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <label>Số lượng</label>
                <input type="number" class="form-control" th:field="*{inventoryQuantity}" required min="0" >
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <label>Kích thước</label>
                <select th:field="*{productSize}" class="select">
                  <option th:each="size:${sizeProduct}" th:value="${size}" th:text="${size}"></option>
                </select>
              </div>
            </div>
            <div class="col-lg-4 col-sm-6 col-12">
              <div class="form-group">
                <div class="form-group">
                  <label>Ảnh</label>
                  <input type="hidden" name="image1Link" th:value="${productVariants.getImage1()}">
                    <div th:if="${(productVariants.getImage1()== null) or ((#strings.startsWith(productVariants.getImage1(), 'http')) ?: false)}">
                      <input class="form-control" type="file" name="image11"  accept="image/*" >
                      <img class="mt-3" width="100px" height="100px" th:src="@{${productVariants.getImage1()}}" alt="img" />
                    </div>
                    <div th:unless="${(productVariants.getImage1()== null) or ((#strings.startsWith(productVariants.getImage1(), 'http')) ?: false)}">
                      <input class="form-control" type="file" name="image11"  accept="image/*" >
                      <img class="mt-3" width="100px" height="100px" th:src="@{'/api/v1/fileUpLoad/files/'+${productVariants.getImage1()}}">
                    </div>
                </div>
              </div>
            </div>
            <div class="col-lg-12">
              <button type="submit" class="btn btn-submit me-2">Submit</button>
              <a th:href="@{/admin/product-variant/list}" class="btn btn-cancel">Cancel</a>
            </div>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<div th:replace="~{component/admin/link/linkAndscript :: script}"></div>

<!-- <script>
  var toolbarOptions = [
    ["bold", "italic", "underline", "strike"], // toggled buttons
    ["blockquote", "code-block"],

    [{ header: 1 }, { header: 2 }], // custom button values
    [{ list: "ordered" }, { list: "bullet" }],
    [{ script: "sub" }, { script: "super" }], // superscript/subscript
    [{ indent: "-1" }, { indent: "+1" }], // outdent/indent
    [{ direction: "rtl" }], // text direction

    [{ size: ["small", false, "large", "huge"] }], // custom dropdown
    [{ header: [1, 2, 3, 4, 5, 6, false] }],
    ["link", "image", "video", "formula"], // add's image support
    [{ color: [] }, { background: [] }], // dropdown with defaults from theme
    [{ font: [] }],
    [{ align: [] }],

    ["clean"], // remove formatting button
  ];

  var quill = new Quill("#editor", {
    modules: {
      toolbar: toolbarOptions,
    },

    theme: "snow",
  });

  const formProduct = document.querySelector('#formProduct')

  formProduct.onsubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(formProduct);
    formData.append('description',quill.root.innerHTML)
    var xhr = new XMLHttpRequest();
    xhr.open("POST", formProduct.action, true);
    xhr.onload = function() {
        if (xhr.status === 200) {
            console.log(xhr.responseText);
        }
    };
    xhr.send(formData);
  }
</script> -->
</body>

</html>